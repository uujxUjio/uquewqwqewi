local MainGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
MainGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local CBar = Instance.new("TextBox", MainGui)
CBar.BackgroundColor3 = Color3.fromRGB(175, 175, 175)
CBar.BorderColor3 = Color3.fromRGB(255, 255, 255)
CBar.BorderSizePixel = 3
CBar.Position = UDim2.new(0, 0, 0.633333333333, 0)
CBar.Size = UDim2.new(0, 0, 0, 20)
CBar.Visible = false
CBar.Font = Enum.Font.GothamBlack
CBar.PlaceholderColor3 = Color3.fromRGB(255, 255, 255)
CBar.Text = ""
CBar.TextColor3 = Color3.fromRGB(255, 255, 255)
CBar.TextSize = 15
CBar.TextStrokeColor3 = Color3.fromRGB(255, 255, 255)

local Frame = Instance.new("Frame", MainGui)
Frame.BackgroundTransparency = 1
Frame.Position = UDim2.new(0.005, 0, 0, 0)
Frame.Size = UDim2.new(0, 100, 0, 100)

local UIListLayout = Instance.new("UIListLayout", Frame)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

local Uis = game:GetService("UserInputService")
local Ctrl = false
Uis.InputBegan:Connect(function(Key, Typing)
    if Typing then return end
    if Key.KeyCode.Name == "Semicolon" then
        CBar.Visible = true
        CBar.Text = ""
        wait()
        CBar:CaptureFocus()
        CBar:TweenSize(UDim2.new(0, 275, 0, 20), "Out", "Quad", 0.4, true)
    end
end)
CBar.FocusLost:Connect(function(Foc)
    if Foc then
        CBar:TweenSize(UDim2.new(0, 0, 0, 20), "Out", "Quad", 0.4, true)
        wait()
        CBar.Visible = false
    end
end)
Uis.InputEnded:Connect(function(Key)
    if Key.KeyCode.Name == "LeftAlt" then
        Ctrl = false
        CBar.Visible = false
    end
end)

local Players, LP = game.Players, game.Players.LocalPlayer
local TweenService = game:GetService("TweenService")
local FLYING = false
local mouse = LP:GetMouse()
local WHeld = false
local SHeld = false
local AHeld = false
local DHeld = false
local flying = false
local flyspeed = 3
local antigh = false
local blink = false
local uis = game:GetService("UserInputService")
local BLINK = false
local blinkspeed = 1
local walkshoot = false

local CamlockTarget = nil
local camlock = false
local camera = game.Workspace.CurrentCamera
local CAMLOCK = false

local camlockvelocity = 6.4
local camlock_yoffset = 0.7
local legitmode = false

local aimlock = false
local aimlocktarget = ""
local loopActive = false
local loopRan = false
local aimlockvelocity = 6.4
local mouse = LP:GetMouse()


function SendNotification(Title, Text, Length)
	game.StarterGui:SetCore('SendNotification', {Title = Title; Text = Text; Icon = ""; Duration = Length })
end


mouse.KeyDown:Connect(function(key)
    if key == "e" and aimlock == true then
        if mouse.Target.Parent:FindFirstChild("Humanoid") and aimlock == true then
            aimlocktarget = mouse.Target.Parent.Name
            SendNotification("Aimlock", "Target : "..aimlocktarget)
        end
        if mouse.Target.Parent:IsA("Accessory") and aimlock == true then
            aimlocktarget = mouse.Target.Parent.Parent.Name
            SendNotification("Aimlock", "Target : "..aimlocktarget)
        end
    end
end)

mouse.KeyDown:Connect(function(key)
    if key == "b" and aimlock == true then
        SendNotification("Aimlock", "Running : Unequip tool to stop", 2)
        local tool;
        if LP.Character:FindFirstChild("Shotty") then
            tool = LP.Character.Shotty
        elseif LP.Character:FindFirstChild("Glock") then
            tool = LP.Character.Glock
        end
        if tool and tool.Parent == LP.Character then
            if not loopRan or not loopActive then
                loopActive = true
                loopRan = true
                repeat 
                    wait(.16)    
                    game.ReplicatedStorage.Fire:FireServer(game.Players[aimlocktarget].Character.HumanoidRootPart.CFrame + game.Players[aimlocktarget].Character.HumanoidRootPart.Velocity / aimlockvelocity)
                until not LP.Character:FindFirstChild("Glock") or not LP.Character:FindFirstChild("Shotty") or LP.Character.Humanoid.Health == 0 or not LP.Character or LP.Character:FindFirstChild("KO")
                loopActive = false
                loopRan = false
            end
        end
    end
end)


local function GetHead(Player)
    if Player:IsA("Player") then
        if Player == LP then return end
        local character = Player.Character
        if character then
            local humanoid = character:FindFirstChildOfClass("Humanoid")
            if humanoid then
                return character:FindFirstChild("Head") or humanoid.Parent:FindFirstChild("Head")
            end
        end
    end
end

local function GetClosest()
    local Distance = math.huge
    
    for _, v in ipairs(Players:GetPlayers()) do
        if GetHead(v) and v ~= LP then
            local mag = (LP:GetMouse().Hit.Position - GetHead(v).Position).Magnitude
            if mag < Distance then
                CamlockTarget = v
                Distance = mag
            end
        end
    end
    return CamlockTarget
end


function Inf()
    game:GetService("ReplicatedStorage").Touch1:FireServer({
        Handle = {Swing = LP.Backpack.Knife.Handle.Hit},
        Info = {
            Stam = {Value = -(Value or math.huge)},
            Range = {Value = 0}
        }
    }, 0, false, 0)
end
local function toolspamming(tool)
    local args = {
        LP.Backpack[tool],
        nil,
        true,
        true
    }

    game:GetService("ReplicatedStorage").Touch1:FireServer(unpack(args))
end
function AirWalk()
    local air = Instance.new("Part", workspace)
    air.Size = Vector3.new(7, 2, 3)
    air.CFrame = LP.Character.HumanoidRootPart.CFrame + Vector3.new(0, -4, 0)
    air.Transparency = 1
    air.Anchored = true
    air.Name = "Airwalk"

    for i = 1, math.huge do 
        task.wait(.1)
        pcall(function()
            air.CFrame = LP.Character.HumanoidRootPart.CFrame + Vector3.new(0, -4, 0)
        end) 
    end
end

function UnAirwalk()
    for i, v in pairs(workspace:GetChildren()) do
        if tostring(v) == "Airwalk" then v:Destroy() end
    end
end

local function HasGamepass(player, gmpid)
    local hasPass, isPurchased = pcall(function()
        return MarketplaceService:PlayerHasPass(player.UserId, gmpid)
    end)
    
    if hasPass and isPurchased then
        return true
    else
        return false
    end
end

local Esp = function(plr)
    local BillBoard = Instance.new('BillboardGui', plr.Character.Head)
    local TextLabel = Instance.new('TextLabel',BillBoard)
    BillBoard.Adornee = plr.Character.Head
    BillBoard.Size = UDim2.new(0,100,0,100)
    BillBoard.StudsOffset = Vector3.new(0,1.3,0)
    BillBoard.AlwaysOnTop = true
    BillBoard.Name = "WowMan"
    TextLabel.BackgroundTransparency = 1
    TextLabel.Size = UDim2.new(1,0,0,40)
    TextLabel.TextColor3 = Color3.new(255, 0, 255)
    TextLabel.TextStrokeTransparency = 0.5
    TextLabel.TextSize = 11
    if HasGamepass(plr, 682084551) then
        while wait() do
            pcall(function()
                BillBoard.Parent = plr.Character.Head
                BillBoard.Adornee = plr.Character.Head
                local Studs = (LP.Character.HumanoidRootPart.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                TextLabel.Text = "Stupid Gay Ass Fag Named: "..tostring(plr).." | Health "..tonumber(math.floor(plr.Character.Humanoid.Health)).."\nHasVest: ".."true ".."Studs: "..tonumber(math.floor(Studs))
            end)
         end
    elseif not HasGamepass(plr, 682084551) then
        while wait() do
            pcall(function()
                BillBoard.Parent = plr.Character.Head
                BillBoard.Adornee = plr.Character.Head
                local Studs = (LP.Character.HumanoidRootPart.Position - plr.Character.HumanoidRootPart.Position).Magnitude
                TextLabel.Text = "Stupid Gay Ass Fag Named: "..tostring(plr).." | Health "..tonumber(math.floor(plr.Character.Humanoid.Health)).."\nHasVest: ".."false ".."Studs: "..tonumber(math.floor(Studs))
            end)
        end
    end
end

uis.InputBegan:Connect(function(input, isTyping)
    if isTyping then return end
    if input.KeyCode == Enum.KeyCode.LeftShift and BLINK then
        blink = true
        while blink do
            LP.Character.HumanoidRootPart.CFrame = LP.Character.HumanoidRootPart.CFrame + LP.Character.HumanoidRootPart.CFrame.lookVector * blinkspeed
            game:GetService("RunService").RenderStepped:Wait()
        end
    end
end)

uis.InputEnded:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.LeftShift and BLINK then
        blink = false
    end
end)

function Idk()
    for i, v in pairs(game:GetService("CoreGui").RobloxGui.Backpack.Hotbar:GetDescendants()) do
        if tostring(v) == "ToolName" or tostring(v) == "Number" then
            v.TextColor3 = Color3.new(255, 0, 255)
        end
    end
end

Idk()

local function togglefly()
    flying = true
    if flying then
        if LP.Character ~= nil then
            if LP.Character:FindFirstChild("HumanoidRootPart") and LP.Character:FindFirstChild("Humanoid") then

                local Float = Instance.new('Part', LP.Character)
                Float.Name = "Float"
                Float.Transparency = 1
                Float.Size = Vector3.new(6,1,6)
                Float.Anchored = true
                LP.Character.HumanoidRootPart.Anchored = true
                local T = LP.Character.HumanoidRootPart
                local CONTROL = {F = 0, B = 0, L = 0, R = 0}
                local lCONTROL = {F = 0, B = 0, L = 0, R = 0}
                local SPEED = 0
                local function FLY()
                    FLYING = true
                    local BG = Instance.new('BodyGyro', T)
                    local BV = Instance.new('BodyVelocity', T)
                    BG.P = 9e4
                    BG.maxTorque = Vector3.new(9e9, 9e9, 9e9)
                    BG.cframe = T.CFrame
                    BV.velocity = Vector3.new(0, 0.1, 0)
                    BV.maxForce = Vector3.new(9e9, 9e9, 9e9)
                    spawn(function()
                        repeat wait()
                            if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 then
                                SPEED = 50
                            elseif not (CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0) and SPEED ~= 0 then
                                SPEED = 0
                            end
                            if (CONTROL.L + CONTROL.R) ~= 0 or (CONTROL.F + CONTROL.B) ~= 0 then
                                BV.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROL.F + CONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                                lCONTROL = {F = CONTROL.F, B = CONTROL.B, L = CONTROL.L, R = CONTROL.R}
                            elseif (CONTROL.L + CONTROL.R) == 0 and (CONTROL.F + CONTROL.B) == 0 and SPEED ~= 0 then
                                BV.velocity = ((workspace.CurrentCamera.CoordinateFrame.LookVector * (lCONTROL.F + lCONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(lCONTROL.L + lCONTROL.R, (lCONTROL.F + lCONTROL.B) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                            else
                                BV.velocity = Vector3.new(0, 0.1, 0)
                            end
                            BG.cframe = workspace.CurrentCamera.CoordinateFrame
                        until not FLYING
                        CONTROL = {F = 0, B = 0, L = 0, R = 0}
                        lCONTROL = {F = 0, B = 0, L = 0, R = 0}
                        SPEED = 0
                        BG:destroy()
                        BV:destroy()
                    end)
                end
                mouse.KeyDown:connect(function(KEY)
                    if KEY:lower() == 'w' then
                        CONTROL.F = flyspeed

                    elseif KEY:lower() == 's' then
                        CONTROL.B = -flyspeed

                    elseif KEY:lower() == 'a' then
                        CONTROL.L = -flyspeed

                    elseif KEY:lower() == 'd' then
                        CONTROL.R = flyspeed

                    end
                end)
                mouse.KeyUp:connect(function(KEY)
                    if KEY:lower() == 'w' then
                        CONTROL.F = 0
                    elseif KEY:lower() == 's' then
                        CONTROL.B = 0
                    elseif KEY:lower() == 'a' then
                        CONTROL.L = 0
                    elseif KEY:lower() == 'd' then
                        CONTROL.R = 0
                    end
                end)
                FLY()
                LP.Character.HumanoidRootPart.Anchored = false
            elseif LP.Character:FindFirstChild("Torso") and LP.Character:FindFirstChild("Humanoid") then
                local Float = Instance.new('Part', LP.Character)
                Float.Name = "Float"
                Float.Transparency = 1
                Float.Size = Vector3.new(6,1,6)
                Float.Anchored = true
                LP.Character.Torso.Anchored = true
                local T = LP.Character.Torso
                local CONTROL = {F = 0, B = 0, L = 0, R = 0}
                local lCONTROL = {F = 0, B = 0, L = 0, R = 0}
                local SPEED = 0
                local function FLY()
                    FLYING = true
                    local BG = Instance.new('BodyGyro', T)
                    local BV = Instance.new('BodyVelocity', T)
                    BG.P = 9e4
                    BG.maxTorque = Vector3.new(9e9, 9e9, 9e9)
                    BG.cframe = T.CFrame
                    BV.velocity = Vector3.new(0, 0.1, 0)
                    BV.maxForce = Vector3.new(9e9, 9e9, 9e9)
                    spawn(function()
                        repeat wait()
                            if CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0 then
                                SPEED = 50
                            elseif not (CONTROL.L + CONTROL.R ~= 0 or CONTROL.F + CONTROL.B ~= 0) and SPEED ~= 0 then
                                SPEED = 0
                            end
                            if (CONTROL.L + CONTROL.R) ~= 0 or (CONTROL.F + CONTROL.B) ~= 0 then
                                BV.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (CONTROL.F + CONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(CONTROL.L + CONTROL.R, (CONTROL.F + CONTROL.B) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                                lCONTROL = {F = CONTROL.F, B = CONTROL.B, L = CONTROL.L, R = CONTROL.R}
                            elseif (CONTROL.L + CONTROL.R) == 0 and (CONTROL.F + CONTROL.B) == 0 and SPEED ~= 0 then
                                BV.velocity = ((workspace.CurrentCamera.CoordinateFrame.lookVector * (lCONTROL.F + lCONTROL.B)) + ((workspace.CurrentCamera.CoordinateFrame * CFrame.new(lCONTROL.L + lCONTROL.R, (lCONTROL.F + lCONTROL.B) * 0.2, 0).p) - workspace.CurrentCamera.CoordinateFrame.p)) * SPEED
                            else
                                BV.velocity = Vector3.new(0, 0.1, 0)
                            end
                            BG.cframe = workspace.CurrentCamera.CoordinateFrame
                        until not FLYING
                        CONTROL = {F = 0, B = 0, L = 0, R = 0}
                        lCONTROL = {F = 0, B = 0, L = 0, R = 0}
                        SPEED = 0
                        BG:destroy()
                        BV:destroy()
                    end)
                end
                mouse.KeyDown:connect(function(KEY)
                    if KEY:lower() == 'w' then
                        CONTROL.F = flyspeed

                    elseif KEY:lower() == 's' then
                        CONTROL.B = -flyspeed

                    elseif KEY:lower() == 'a' then
                        CONTROL.L = -flyspeed

                    elseif KEY:lower() == 'd' then
                        CONTROL.R = flyspeed

                    end
                end)
                mouse.KeyUp:connect(function(KEY)
                    if KEY:lower() == 'w' then
                        CONTROL.F = 0
                    elseif KEY:lower() == 's' then
                        CONTROL.B = 0
                    elseif KEY:lower() == 'a' then
                        CONTROL.L = 0
                    elseif KEY:lower() == 'd' then
                        CONTROL.R = 0
                    end
                end)
                FLY()
                LP.Character.Torso.Anchored = false

                repeat wait() 					    LP.Character.Humanoid.PlatformStand = false
                until not LP.Character.Humanoid
            end
        end
    else
        if LP.Character.Character then
            if LP.Character.Character:FindFirstChild("Float") then
                LP.Character.Character:FindFirstChild("Float"):Destroy()
            end
        end
        FLYING = false
    end
end


local function FindPlr(plr)
    for _, v in ipairs(Players:GetPlayers()) do
        if string.find(v.Name:lower(), plr:lower()) or string.find(v.DisplayName:lower(), plr:lower()) then
            return v
        end
    end
end

LP:GetMouse().KeyDown:Connect(function(Key)
    if Key == "q" and CAMLOCK then
        CamlockTarget = GetClosest()
        SendNotification("type shiITT", "Camlock Target : "..tostring(CamlockTarget))
        camlock = not camlock
    end
end)


game:GetService("RunService").RenderStepped:Connect(function()
    if CAMLOCK then
        if legitmode then
            if camlock and CamlockTarget then
                if CamlockTarget:FindFirstChild("KO") then
                    camlock = false
                    return
                end
                local targetHead = GetHead(CamlockTarget)
                if targetHead then
                    local targetPosition = targetHead.Position - Vector3.new(0, 2, 0) + (targetHead.Velocity / camlockvelocity) 
                    if targetHead.Velocity.Y > 0 then
                        targetPosition = targetPosition - Vector3.new(0, 3, 0)
                    end
                    local wow = (camera.CFrame.Position.Y-camlock_yoffset)
                    targetPosition = Vector3.new(targetPosition.X, wow, targetPosition.Z)
                    camera.CFrame = CFrame.new(camera.CFrame.Position, targetPosition)
                end
            end
        elseif not legitmode then
            if camlock and CamlockTarget then
                pcall(function()
                    workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.p, GetHead(CamlockTarget).CFrame.p + GetHead(CamlockTarget).Velocity / camlockvelocity)
                end)
            end
        end
    end
end)


local function createcmd(func)
    CBar.FocusLost:Connect(function(enterPressed)
        if enterPressed then
            local args = string.split(CBar.Text, " ")
            func(args)
        end
    end)
end

createcmd(function(args)
    if args[1]:lower() == "to" then
        local target = FindPlr(args[2])
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            local playerHRP = LP.Character and LP.Character:FindFirstChild("HumanoidRootPart")
            if playerHRP then
                local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
                local goal = {CFrame = target.Character.HumanoidRootPart.CFrame}
                local tween = TweenService:Create(playerHRP, tweenInfo, goal)
                tween:Play()
            end
        end
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "fly" then
        togglefly()
        AirWalk()
    elseif args[1]:lower() == "unfly" then
        flying = false
        FLYING = false
        UnAirwalk()
        pcall(function()
            LP.Character.HumanoidRootPart.Float:Destroy()
            LP.Character.Torso.Float:Destroy()
        end)
    elseif args[1]:lower() == "flyspeed" then
        flyspeed = tonumber(args[2])
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "airwalk" then
        if not workspace:FindFirstChild("Airwalk") then
            AirWalk()
        elseif workspace:FindFirstChild("Airwalk") then
            workspace["Airwalk"]:Destroy()
        end
    end
end)

local antigh = false
local jumpshoot = false

createcmd(function(args)
    if args[1]:lower() == "jumpshoot" then
        jumpshoot = not jumpshoot
        SendNotification("type shiITT", "Jumpshoot : "..tostring(jumpshoot))
	    while jumpshoot do
            task.wait()
			pcall(function()
				game.Players.LocalPlayer.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Running);game.Players.LocalPlayer.Character.Humanoid.PlatformStand = false
		    end)
        end
    end
end)
createcmd(function(args)
    if args[1]:lower() == "antigh" then
        antigh = not antigh
        SendNotification("type shiITT", "Anti GH : "..tostring(antigh))
	    while antigh do
            task.wait()
			pcall(function()
				LP.Character.Humanoid.PlatformStand = false
			end)
		end
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "infstam" then
        Inf()
        LP.CharacterAdded:Connect(function(char)
            task.wait(.7)
            Inf()
        end)
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "esp" then
        local target = FindPlr(args[2])
        Esp(target)
        SendNotification("ESP", "Target : "..tostring(target))
    elseif args[1]:lower() == "unesp" then
		for i, v in pairs(game.Players:GetPlayers()) do
			for i, v in pairs(v.Character:GetDescendants()) do
				if v:IsA('BillboardGui') then v:Destroy() end
			end
		end
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "blink" then
        BLINK = not BLINK
        SendNotification("Type shIITt", "Blink : "..BLINK)
    elseif args[1]:lower() == "blinkspeed" then
        local num = (tonumber(args[2]) / 10)
        blinkspeed = num
        SendNotification("Blink", "Speed : "..blinkspeed)
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "walkshoot" or args[1]:lower() == "noslow" then
        walkshoot = not walkshoot
        if walkshoot then
            game:GetService("ReplicatedStorage")['lIIl'].Parent = workspace
        elseif not walkshoot then
            workspace['lIIl'].Parent = game:GetService("ReplicatedStorage")
        end
    end
end)

createcmd(function(args) 
    if args[1]:lower() == "camlock" then
        CAMLOCK = not CAMLOCK
        if args[2]:lower() == "legit" then
            legitmode = true
            SendNotification("type sHittT", "Camlock Legit Mode (Doesnt Track Airshots)")
        elseif args[2]:lower() == "blatant" then
            legitmode = false
            SendNotification("type sHittT", "self explanatory")
        end
    elseif args[1]:lower() == "yoffset" then
        local num = (tonumber(args[2]) / 10)
        camlock_yoffset = num
        SendNotification("type sHittT", "Camlock Y Offset : "..tostring(camlock_yoffset))
    elseif args[1]:lower() == "camvelocity" then
        camlockvelocity = tonumber(args[2])
        SendNotification("type sHittT", "Camlock Velocity : "..tostring(camlockvelocity))
    end
end)

createcmd(function(args)
    if args[1]:lower() == "re" or args[1]:lower() == "reset" then
        toolspamming("Punch")
        LP.Character:BreakJoints()
    end
end)

createcmd(function(args)
    if args[1]:lower() == "aimlock" or args[1]:lower() == "aimbot" then
        aimlock = not aimlock
        SendNotification("Aimlock", "On : "..tostring(aimlock))
    end
end)

createcmd(function(args)
    if args[1]:lower() == "aimlocktarget" or args[1]:lower() == "atarget" then
        aimlocktarget = tostring(FindPlr(args[2]))
    end
end)

createcmd(function(args)
    if args[1]:lower() == "aimvelocity" or args[1]:lower() == "avelocity" or args[1]:lower() == "aimlockvelocity" then
        aimlockvelocity = tonumber(args[2])
    end
end)



print("exec'd")
